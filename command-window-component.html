<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Window Component</title>
    <style>
        /* Command Window Component Styles */
        .command-window {
            max-width: 800px;
            margin: 20px auto;
            font-family: 'Courier New', Consolas, monospace;
            background: #1e1e1e;
            border: 2px solid #333;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .command-window-header {
            background: #2d2d2d;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #333;
        }

        .command-window-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff5f56;
        }

        .command-window-dot:nth-child(2) {
            background: #ffbd2e;
        }

        .command-window-dot:nth-child(3) {
            background: #27c93f;
        }

        .command-window-title {
            color: #999;
            font-size: 12px;
            margin-left: 10px;
        }

        .command-window-privacy {
            background: #2a2a2a;
            padding: 12px 15px;
            border-bottom: 1px solid #333;
            color: #ffbd2e;
            font-size: 12px;
            line-height: 1.5;
        }

        .command-window-privacy strong {
            color: #ff5f56;
        }

        .command-window-output {
            padding: 15px;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            color: #00ff00;
            font-size: 14px;
            line-height: 1.6;
        }

        .command-window-output::-webkit-scrollbar {
            width: 8px;
        }

        .command-window-output::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        .command-window-output::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        .command-window-output::-webkit-scrollbar-thumb:hover {
            background: #777;
        }

        .command-line {
            margin-bottom: 10px;
        }

        .command-prompt {
            color: #00ff00;
        }

        .command-input-line {
            color: #ffffff;
            margin-left: 20px;
        }

        .command-response {
            color: #87ceeb;
            margin-left: 20px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .command-error {
            color: #ff5f56;
            margin-left: 20px;
        }

        .command-info {
            color: #ffbd2e;
            margin-left: 20px;
        }

        .command-window-input-area {
            padding: 15px;
            border-top: 1px solid #333;
            background: #252525;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .command-window-prompt-symbol {
            color: #00ff00;
            font-weight: bold;
        }

        .command-window-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #ffffff;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 14px;
            padding: 5px;
        }

        .command-window-input::placeholder {
            color: #666;
        }

        .command-window-submit {
            background: #00ff00;
            color: #1e1e1e;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-family: 'Courier New', Consolas, monospace;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }

        .command-window-submit:hover {
            background: #00dd00;
        }

        .command-window-submit:active {
            background: #00bb00;
        }

        .command-window-submit:disabled {
            background: #555;
            color: #888;
            cursor: not-allowed;
        }

        .command-cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #00ff00;
            animation: blink 1s infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 49% {
                opacity: 1;
            }
            50%, 100% {
                opacity: 0;
            }
        }

        .command-loading {
            color: #ffbd2e;
            margin-left: 20px;
        }

        .command-loading::after {
            content: '...';
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% {
                content: '.';
            }
            40% {
                content: '..';
            }
            60%, 100% {
                content: '...';
            }
        }
    </style>
</head>
<body>

<!-- EMBEDBARE COMPONENT - KOPIEER ONDERSTAANDE CODE NAAR JE BLOG.HTML -->
<!-- BEGIN COMMAND WINDOW COMPONENT -->

<div class="command-window" id="commandWindow">
    <div class="command-window-header">
        <span class="command-window-dot"></span>
        <span class="command-window-dot"></span>
        <span class="command-window-dot"></span>
        <span class="command-window-title">VBBSKW Command Interface</span>
    </div>
    
    <div class="command-window-privacy">
        <strong>⚠️ PRIVACY WAARSCHUWING:</strong> Voer geen persoonsgegevens, privacygevoelige informatie of persoonlijke details in. Alle invoer is anoniem en wordt niet opgeslagen.
    </div>
    
    <div class="command-window-output" id="commandOutput">
        <div class="command-line">
            <span class="command-prompt">$</span> <span class="command-info">Welkom bij de VBBSKW Command Interface</span>
        </div>
        <div class="command-line">
            <span class="command-prompt">$</span> <span class="command-info">Stel uw vraag hieronder. Onthoud: deel geen persoonlijke informatie.</span>
        </div>
    </div>
    
    <div class="command-window-input-area">
        <span class="command-window-prompt-symbol">$</span>
        <input 
            type="text" 
            class="command-window-input" 
            id="commandInput" 
            placeholder="Typ uw vraag hier..."
            autocomplete="off"
            spellcheck="false"
        >
        <button class="command-window-submit" id="commandSubmit">VERZEND</button>
    </div>
</div>

<script>
(function() {
    'use strict';
    
    // ====================================
    // CONFIGURATIE
    // ====================================
    const CONFIG = {
        // Vervang dit met jouw eigen API endpoint
        API_ENDPOINT: 'https://jouw-api-endpoint.com/api/query',
        
        // Maximum aantal tekens voor een vraag
        MAX_QUERY_LENGTH: 500,
        
        // Timeout voor API calls (in milliseconden)
        API_TIMEOUT: 30000
    };
    
    // ====================================
    // DOM ELEMENTEN
    // ====================================
    const elements = {
        output: document.getElementById('commandOutput'),
        input: document.getElementById('commandInput'),
        submit: document.getElementById('commandSubmit')
    };
    
    // ====================================
    // HELPER FUNCTIES
    // ====================================
    
    /**
     * Voegt een nieuwe regel toe aan de output
     */
    function addOutputLine(type, content) {
        const line = document.createElement('div');
        line.className = 'command-line';
        
        const prompt = document.createElement('span');
        prompt.className = 'command-prompt';
        prompt.textContent = '$';
        
        const text = document.createElement('span');
        text.className = `command-${type}`;
        text.textContent = content;
        
        line.appendChild(prompt);
        line.appendChild(document.createTextNode(' '));
        line.appendChild(text);
        
        elements.output.appendChild(line);
        elements.output.scrollTop = elements.output.scrollHeight;
    }
    
    /**
     * Toont de ingevoerde vraag
     */
    function displayUserQuery(query) {
        const line = document.createElement('div');
        line.className = 'command-line';
        
        const prompt = document.createElement('span');
        prompt.className = 'command-prompt';
        prompt.textContent = '>';
        
        const text = document.createElement('span');
        text.className = 'command-input-line';
        text.textContent = query;
        
        line.appendChild(prompt);
        line.appendChild(document.createTextNode(' '));
        line.appendChild(text);
        
        elements.output.appendChild(line);
        elements.output.scrollTop = elements.output.scrollHeight;
    }
    
    /**
     * Toont een loading indicator
     */
    function showLoading() {
        const line = document.createElement('div');
        line.className = 'command-line';
        line.id = 'loadingLine';
        
        const prompt = document.createElement('span');
        prompt.className = 'command-prompt';
        prompt.textContent = '$';
        
        const text = document.createElement('span');
        text.className = 'command-loading';
        text.textContent = 'Verwerken';
        
        line.appendChild(prompt);
        line.appendChild(document.createTextNode(' '));
        line.appendChild(text);
        
        elements.output.appendChild(line);
        elements.output.scrollTop = elements.output.scrollHeight;
    }
    
    /**
     * Verwijdert de loading indicator
     */
    function hideLoading() {
        const loadingLine = document.getElementById('loadingLine');
        if (loadingLine) {
            loadingLine.remove();
        }
    }
    
    /**
     * Valideer de input (geen persoonlijke gegevens patterns)
     */
    function validateInput(query) {
        // Trim whitespace
        query = query.trim();
        
        // Check of de vraag niet leeg is
        if (query.length === 0) {
            return { valid: false, error: 'Voer een vraag in.' };
        }
        
        // Check lengte
        if (query.length > CONFIG.MAX_QUERY_LENGTH) {
            return { valid: false, error: `Vraag te lang (max ${CONFIG.MAX_QUERY_LENGTH} tekens).` };
        }
        
        // Basis check op mogelijke persoonlijke informatie patterns
        const sensitivePatterns = [
            /\b\d{9}\b/i, // BSN-achtig patroon
            /\b[A-Z]{2}\d{6}\b/i, // Rijbewijs/ID-achtig patroon
            /\b[\w\.-]+@[\w\.-]+\.\w{2,}\b/i // Email
        ];
        
        for (const pattern of sensitivePatterns) {
            if (pattern.test(query)) {
                return { 
                    valid: false, 
                    error: 'Uw vraag lijkt persoonlijke gegevens te bevatten. Verwijder deze en probeer opnieuw.' 
                };
            }
        }
        
        return { valid: true };
    }
    
    /**
     * Stuurt de vraag naar de API
     */
    async function sendQuery(query) {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), CONFIG.API_TIMEOUT);
        
        try {
            const response = await fetch(CONFIG.API_ENDPOINT, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    query: query,
                    timestamp: Date.now()
                }),
                signal: controller.signal
            });
            
            clearTimeout(timeoutId);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            return { success: true, data: data };
            
        } catch (error) {
            clearTimeout(timeoutId);
            
            if (error.name === 'AbortError') {
                return { success: false, error: 'Verzoek time-out. Probeer het later opnieuw.' };
            }
            
            console.error('API Error:', error);
            return { success: false, error: 'Kon geen verbinding maken met de server. Probeer het later opnieuw.' };
        }
    }
    
    /**
     * Verwerkt het formulier
     */
    async function handleSubmit() {
        const query = elements.input.value;
        
        // Valideer input
        const validation = validateInput(query);
        if (!validation.valid) {
            addOutputLine('error', validation.error);
            return;
        }
        
        // Toon de vraag
        displayUserQuery(query);
        
        // Clear input
        elements.input.value = '';
        
        // Disable input tijdens verwerking
        elements.input.disabled = true;
        elements.submit.disabled = true;
        
        // Toon loading
        showLoading();
        
        // Stuur naar API
        const result = await sendQuery(query);
        
        // Verberg loading
        hideLoading();
        
        // Toon resultaat
        if (result.success) {
            // Verwerk API response
            const answer = result.data.answer || result.data.response || 'Geen antwoord ontvangen.';
            addOutputLine('response', answer);
        } else {
            addOutputLine('error', result.error);
        }
        
        // Re-enable input
        elements.input.disabled = false;
        elements.submit.disabled = false;
        elements.input.focus();
    }
    
    // ====================================
    // EVENT LISTENERS
    // ====================================
    
    // Submit button click
    elements.submit.addEventListener('click', handleSubmit);
    
    // Enter key in input
    elements.input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            handleSubmit();
        }
    });
    
    // Focus input on load
    elements.input.focus();
    
    // Voorkom dat de component data opslaat
    window.addEventListener('beforeunload', function() {
        elements.input.value = '';
    });
    
})();
</script>

<!-- EINDE COMMAND WINDOW COMPONENT -->

</body>
</html>

